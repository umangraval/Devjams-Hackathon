<html>
    <head>
        <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  
</head>       
  
            <body>
                    <nav>
                            <div class="nav-wrapper">
                              <a href="#" class="brand-logo">Estatics</a>
                              <ul id="nav-mobile" class="right hide-on-med-and-down">
                                <li><a href="/property">Properties</a></li>
                                <li><a href="/sell">Sell</a></li>
                                <li><a href="/myproperties">My Properties</a></li>
                                <li><a href="/transaction">Transaction</a></li>
                                <li><a href="/signin">SignIn</a></li>

                              </ul>
                            </div>
                        </nav>
<div class="center-align" style="margin-left: 250px; margin-right: 250px"> <h1>Transaction</h1>
<table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">Serial No</th>
        <th scope="col">Token</th>
        <th scope="col">Price</th>
        <th scope="col">Property Id</th>
        <th scope="col">Date</th>
      </tr>
    </thead>
    <tbody>
      <% var c=1,total=0 %>
            <% data["rows"].forEach(function(trx){ %>
        <tr>
        <th scope="row"><%=c%></th>
        <td id="tk"><%=trx.token%></td>
        <td><%=trx.price%></td>
        <td><%=trx.propertyid%></td>
        <td><%=trx.date%></td>
        <td> <!-- Button to Open the Modal -->
          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
            Open modal
          </button>
        
          <!-- The Modal -->
          <div class="modal fade" id="myModal" style="width:30%;height:40%;box-shadow:10">
            <div class="modal-dialog">
              <div class="modal-content">
              
                <!-- Modal Header -->
                <div class="modal-header">
                  <h4 class="modal-title">Modal Heading</h4>
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                
                <!-- Modal body -->
                <div class="modal-body">
                  
                </div>
                
                <!-- Modal footer -->
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
                
              </div>
            </div>
          </div></td>
      </tr>
      <% total=total + trx.price%>
      <% c++ %>
      <% }) %>
    </tbody>
</table>
<br>
<div class="center-align">
  TOTAL PAY = <%=total%> <div id="paypal-button"></div>
  <script src="https://www.paypalobjects.com/api/checkout.js"></script>
  <script>
  paypal.Button.render({
  // Configure environment
  env: 'sandbox',
  client: {
  sandbox: 'demo_sandbox_client_id',
  production: 'demo_production_client_id'
  },
  // Customize button (optional)
  locale: 'en_US',
  style: {
  size: 'small',
  color: 'gold',
  shape: 'pill',
  },
  // Set up a payment
  payment: function (data, actions) {
  return actions.payment.create({
  transactions: [{
  amount: {
  total: '0.01',
  currency: 'USD'
  }
  }]
  });
  },
  // Execute the payment
  onAuthorize: function (data, actions) {
  return actions.payment.execute()
  .then(function () {
  // Show a confirmation message to the buyer
  window.alert('Thank you for your purchase!');
  });
  }
  }, '#paypal-button');
  </script>  
</div>
</div>
</body>
</html>
